<!-- auth.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login | AtiyaTrinkets</title>
</head>
<body>
  <h2>Sign In / Sign Up</h2>
  <input type="email" id="email" placeholder="Email" />
  <input type="password" id="password" placeholder="Password" />
  <button onclick="signUp()">Sign Up</button>
  <button onclick="signIn()">Sign In</button>
  <button onclick="signOut()">Sign Out</button>
  <p id="user-status"></p>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCUkMcVsTmhfZ0PtsGTHJIGU156MjrxqzE",
      authDomain: "atiyatrinkets-ce4b6.firebaseapp.com",
      projectId: "atiyatrinkets-ce4b6",
      storageBucket: "atiyatrinkets-ce4b6.firebaseapp.com",
      messagingSenderId: "562847025664",
      appId: "1:562847025664:web:c200328acd5643c32e66e5",
      measurementId: "G-WBWWBHQTHJ"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    function signUp() {
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      createUserWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
          alert("Signed up successfully!");
        })
        .catch((error) => {
          alert(error.message);
        });
    }

    function signIn() {
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      signInWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
          alert("Logged in successfully!");
        })
        .catch((error) => {
          alert(error.message);
        });
    }

    function signOutUser() {
      signOut(auth).then(() => {
        alert("Signed out");
      });
    }

    onAuthStateChanged(auth, (user) => {
      const status = document.getElementById("user-status");
      if (user) {
        status.innerText = "Logged in as " + user.email;
      } else {
        status.innerText = "Not logged in";
      }
    });

    window.signUp = signUp;
    window.signIn = signIn;
    window.signOut = signOutUser;
  </script>
</body>
</html>
